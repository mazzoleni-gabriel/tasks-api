# Tasks-api

This is a tasks-api example

## To run this application locally

- Run `Make run`
- Run database migrations available on `/resource/migrations`

By now your application should be up and running! Try it out:

#### Ping
`curl --location --request GET 'localhost:8080/tasks/ping`

#### Create a task

`curl --location --request POST 'localhost:8080/tasks' \
--header 'X-user-id: 1111' \
--header 'Content-Type: application/json' \
--data-raw '{
"summary": "summary test",
"performed_at": "2022-03-18T23:11:59Z"
}'`

### Swagger documentation
You can check the api endpoints documentation on swagger.

Right now the application's endpoint cannot be called directly from swagger-ui because of CORS misconfiguration.

#### Serve swagger locally

- Install [swagger-ui-watcher](https://www.npmjs.com/package/swagger-ui-watcher)
- Run `Make serve`

#### Generate swagger documentation
Thw swagger documentation is generated by go-swagger lib, it uses annotations present on the entrypoint packages to generate ir

- Install [go-swagger](https://github.com/go-swagger/go-swagger)
- Run `Make generate-index`

## To be done
This application is not fully implemented, here are some improvements to be done:

- Database integrated tests
- Full use cases integrations tests
- Application and database configurations loaded with environment, by now it is hard coded
- Use [localstack](https://github.com/localstack/localstack) to simulate AWS SNS when publishing messages
- Handle task summary PII information
- Implement Get by id endpoint
- Configure CORS so the endpoints can be called from swagger-ui 